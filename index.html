<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Equinox Trail</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/styles.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/reet.css" />
    <link rel="shortcut icon" href="equinox-logo.png" type="image/png">
    
</head>
<body>
  <header id="header">
    <div class="container">
      <a href="#inici" title="Ir a la página de inicio"><img src="img/equinox-logo.png" alt="Logo Equinox" class="header__logo floatleft"></a>
      </div>
      <nav class="floatright">
        <ul>
          <li><a href="#info" title="info" class="scroll-link" data-id="informacio">Informació</a></li>
          <li><a href="#track" title="track" class="scroll-link" data-id="circuits">Recorreguts</a></li>
          <li><a href="#inscripcions" title="inscripcions" class="scroll-link" data-id="reglament">Inscripcions</a></li>
          <li><a href="#media" title="media" class="scroll-link" data-id="home">Media</a></li>
          <li><a href="#resultats" title="resultats" class="scroll-link" data-id="home">Resultats</a></li>
          <li><a href="#documents" title="documents" class="scroll-link" data-id="home">Documents</a></li>
        </ul>
      </nav>
  </header>

  <!-- Navegador lateral -->
  <!-- mai estils en linea a l'html, barreges coses i es molt poc escalable -->
  <!-- style="z-index: 50; width: 33px; height: 100px; min-width: 12px; min-height: 48px;" -->
  <nav class="navegador" id="navlateral">
    <ul class="style_navlateral">
      <li class="style_navlateral_item">
        <a class="style_navlateral_link" href="#inici">
          <svg width="12" heigh="12" viewbox="0 0 24 24" class="style_navlateral_symbol">
            <circle cx="12" cy="12" r="10"></circle>
          </svg>
        </a>
      </li>
      <li class="style_navlateral_item">
          <a class="style_navlateral_link" href="#info">
            <svg width="12" heigh="12" viewbox="0 0 24 24" class="style_navlateral_symbol">
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
          </a>
      </li>
      <li class="style_navlateral_item">
          <a class="style_navlateral_link" href="#track">
            <svg width="12" heigh="12" viewbox="0 0 24 24" class="style_navlateral_symbol">
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
          </a>
      </li>
      <li class="style_navlateral_item">
            <a class="style_navlateral_link" href="#inscripcions">
              <svg width="12" heigh="12" viewbox="0 0 24 24" class="style_navlateral_symbol">
                <circle cx="12" cy="12" r="10"></circle>
              </svg>
            </a>
      </li>
      <li class="style_navlateral_item">
          <a class="style_navlateral_link" href="#media">
            <svg width="12" heigh="12" viewbox="0 0 24 24" class="style_navlateral_symbol">
              <circle cx="12" cy="12" r="10"></circle>
            </svg>
          </a>
      </li>
      <li class="style_navlateral_item">
        <a class="style_navlateral_link" href="#resultats">
          <svg width="12" heigh="12" viewbox="0 0 24 24" class="style_navlateral_symbol">
            <circle cx="12" cy="12" r="10"></circle>
          </svg>
        </a>
      </li>
      <li class="style_navlateral_item">
      <a class="style_navlateral_link" href="#documents">
        <svg width="12" heigh="12" viewbox="0 0 24 24" class="style_navlateral_symbol">
          <circle cx="12" cy="12" r="10"></circle>
        </svg>
      </a>
      </li>
    </ul>
  </nav>




  <div id="home" class="content">
    <section class="parallax section" id="inici">
      <h1>EQUINOX TRAIL 2019</h1>
    </section>
    <section class="section" id="info">
        INFO<br>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
      </section>
    <section class="section" id="track">
      TRACK<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </section>
    <section class="section" id="inscripcions">
      INSCRIPTIONS<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </section>
    <section class="section" id="media">
      MEDIA<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </section>
    <section class="section" id="resultats">
      RESULTS<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </section>
    <section class="section" id="documents">
      DOCUMENTS<br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </section>
  </div>
  <footer>
    <p>PijokupaBA Collecive open creative commons liscense 1998</p>
  </footer>


  <!-- scripts -->
  <script src="js/scrollHandler.js" type="text/javascript"></script>
  <script>
    var scrollHandler = new ScrollHandler();
    
    // SECTIONS SCROLL HANDLING
    var sections = Array.apply(null, document.getElementsByTagName('section'));
    function navPanelTagger (ev) {
      var offsets = sections.map(function (section) {
        // debugger;
        var bounding = section.getBoundingClientRect();
        console.log(section.id, Math.max(bounding.height + bounding.bottom, Math.min(bounding.height, bounding.top + bounding.height)));// ((bounding.height + (window.innerHeight - bounding.bottom))/window.innerHeight));
        return {
          section: section,
          offset: Math.abs(bounding.top)/bounding.height
        }
      });

      function isInViewPort (element) {
        var bounding = element.getBoundingClientRect();
        return bounding.top >= 0 &&
          bounding.left >= 0 &&
          bounding.right <= (window.innerWidth || document.documentElement.clientWidth) /* &&
          bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight)*/;
      }

      // var currentSection = sections.filter(function (section) {
      //   return isInViewPort(section);
      // }).shift();

      // debugger;

      currentSection = offsets.sort(function (d1, d2) {
        return d1.offset - d2.offset; 
      }).shift().section;

      if (currentSection) {
        document.body.setAttribute('section', currentSection.id);
      } else {
        document.body.setAttribute('section', 'info');
      }
    };
    scrollHandler.onScroll(navPanelTagger);
    navPanelTagger();

    Array.apply(null, document.querySelectorAll('a[href*="#"]'))
      .filter(function (el) {
        return el.getAttribute('href') !== "#" && el.getAttribute('href') !== "#0";
      }).map(function (el) {
        el.addEventListener('click', function () {
          el.scrollIntoView({
            behavior: 'smooth'
          });
        });
      });

    // HEADER SCROLL HANDLING
    var header = document.getElementById('header');
    function headerScrollController (ev) {
      
      if (window.scrollY > 100) {
        header.classList.add('opaque');
      } else {
        header.classList.remove('opaque')
      }
    }

    header.onScroll(headerScrollController);
  </script>
</body>

