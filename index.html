<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Cursa Equinox Trail</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="css/styles.css" />
    <link rel="stylesheet" type="text/css" media="screen" href="css/reet.css" />
    
</head>
<body>
  <header id="header">
    <div class="container">
      <a href="index.html" title="Ir a la página de inicio"><img src="img/logo.png" alt="Logo KM0" class="floatleft"></a>
      <nav class="floatright">
        <ul>
          <li><a href="#section1" title="section1" class="scroll-link" data-id="home">Home<a/></li>
          <li><a href="#section2" title="section2" class="scroll-link" data-id="informacio">Informació</a></li>
          <li><a href="#section3" title="section3" class="scroll-link" data-id="circuits">Circuits</a></li>
          <li><a href="#section4" title="section4" class="scroll-link" data-id="reglament">Reglament</a></li>
        </ul>
      </nav>
    </div>
  </header>
  <div id="home" class="content">
    <section class="parallax" id="section1">
      <h1>EQUINOX TRAIL 2019</h1>
    </section>
    <section class="parallax" id="section2">
      
    </section>
    <section class="parallax" id="section3">
      Section 3 <br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </section>
    <section class="parallax" id="section4">
      Section 4 <br>
      Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
    </section>
  </div>


  <!-- scripts -->
  <script src="js/scrollHandler.js" type="text/javascript"></script>
  <script>
    var scrollHandler = new ScrollHandler();
    
    // SECTIONS SCROLL HANDLING
    var sections = Array.apply(null, document.getElementsByTagName('section'));
    function navPanelTagger (ev) {
      function isInViewPort (element) {
        var bounding = element.getBoundingClientRect();
        return bounding.top >= 0 &&
          bounding.left >= 0 &&
          bounding.right <= (window.innerWidth || document.documentElement.clientWidth) &&
          bounding.bottom <= (window.innerHeight || document.documentElement.clientHeight);
      }

      var currentSection = sections.filter(function (section) {
        return isInViewPort(section);
      }).shift();

      if (currentSection) {
        document.body.setAttribute('section', currentSection.id);
      } else {
        document.body.setAttribute('section', 'section1');
      }

    };
    scrollHandler.onScroll(navPanelTagger);

    Array.apply(null, document.querySelectorAll('a[href*="#"]'))
      .filter(function (el) {
        return el.getAttribute('href') !== "#" && el.getAttribute('href') !== "#0";
      }).map(function (el) {
        el.addEventListener('click', function () {
          el.scrollIntoView({
            behavior: 'smooth'
          });
        });
      });

    // HEADER SCROLL HANDLING
    var header = document.getElementById('header');
    function headerScrollController (ev) {
      
      if (window.scrollY > 100) {
        header.classList.add('opaque');
      } else {
        header.classList.remove('opaque')
      }
    }

    header.onScroll(headerScrollController);
  </script>
</body>

